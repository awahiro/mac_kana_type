# かな入力タイピング練習アプリ仕様書

## 概要
macでのかな入力用タイピング練習WEBアプリケーション。USキーボード + Google日本語入力環境に対応。

## 機能要件

### 基本機能
- テキストファイルで練習用の文を指定（一行が一つの問題）
- かな入力での文字入力練習
- Shift組み合わせ文字対応（例：Shift+0で「を」）

### 画面レイアウト（上から順に）
1. **モード選択**
   - 「簡単モード」：次に入力するキーと指をハイライト表示
   - 「普通モード」：ハイライト表示なし

2. **問題選択**
   - ./problem/ディレクトリ配下の.txtファイルから選択
   - デフォルト問題も選択可能
   - 「問題を更新」ボタンで新しいファイルを読み込み

3. **スタートボタン**
   - 「スタート」：練習開始
   - 「リセット」：練習中断・リセット

4. **問題文表示**
   - 入力済み部分：緑色背景
   - 現在入力文字：黄色背景
   - 未入力部分：通常表示

5. **指の表示**
   - 8本の指を横並び表示（親指除く）
   - 指の種類別に色分け（小指：ピンク、薬指：緑、中指：紫、人差指：青）
   - 次に使う指：オレンジ色でハイライト

6. **キーボード配列**
   - USキーボードレイアウト
   - 各キーに表示：上段左（ローマ字）、上段右（Shift文字）、下段（かな文字）
   - 指別背景色：対応する指と同じ色
   - キー状態表示：
     - 次のキー：青色枠線（パルスアニメーション）
     - 正解時：黄緑色枠線（0.5秒）
     - 間違い時：赤色枠線（0.5秒）
     - Shift押下中：オレンジ色背景
     - スタート前押下：黄緑色枠線（0.2秒）

### キー入力処理
- **アクティブ時**（スタート後）
  - 正解：次の文字に進む、黄緑枠線表示
  - 間違い：進まない、赤枠線表示
  - Shift組み合わせ：正しく認識（物理キー基準）

- **非アクティブ時**（スタート前）
  - 任意のキー：黄緑枠線表示
  - Shift：オレンジ色背景表示

### ファイル管理
- **問題ファイル**: ./problem/*.txt
  - 各行が1つの問題
  - UTF-8エンコーディング
- **設定ファイル**: config.js
  - キーボード配列定義
  - 指とキーの対応関係
  - Shift組み合わせ文字定義

### 技術仕様
- **言語**: JavaScript (ES6+)
- **スタイル**: CSS3
- **キーイベント**: 物理キーコード使用（event.code）
- **レスポンシブ**: モバイル対応
- **ブラウザ対応**: モダンブラウザ

### UI/UX仕様
- **色分けシステム**:
  - 小指：薄いピンク
  - 薬指：薄い緑
  - 中指：薄い紫
  - 人差指：薄い青
  - 親指：薄いオレンジ（未使用）

- **視覚フィードバック**:
  - キー枠線でレイアウト崩れを防止
  - アニメーション効果でユーザビリティ向上
  - 指別色分けで学習効率向上

- **レイアウト**:
  - 中央配置で見やすい配置
  - キー間隔を適切に調整
  - 指表示をキーボード上部に配置

## サンプル問題
- 基本ひらがな
- 短い単語
- 一般的な挨拶
- 文章練習
- Shift文字練習（ぁぃぅぇぉゃゅょを等）